<!-- Bootstrap v3.0.3 --><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link href="https://s3.amazonaws.com/mturk-public/bs30/css/bootstrap.min.css" rel="stylesheet" /><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<section class="container" id="Other" style="margin-bottom:15px; padding: 10px 10px; font-family: Verdana, Geneva, sans-serif; color:#333333; font-size:0.9em; font-size: medium;">
<div class="row col-xs-12 col-md-12"><!-- Instructions -->
<div class="panel panel-primary">
<div class="panel-heading"><strong>Instructions</strong></div>

<div class="panel-body">
<p>1. Read the <b>sentence with the highlighted word</b>. <em>Fig.1</em> below shows an example.</p>

<figure class="figure"><figcaption class="figure-caption text-center"><b>Fig.1</b> Example Sentence</figcaption> <img class="figure-img img-fluid center-block" src="https://ancadumitrache.github.io/frames/sentence.png" width="80%" /></figure>

<p>2. Select from the list <b>all the meanings that apply to the highlighted word</b> in the sentence. <em>Fig.2</em> below shows one meaning in the list for <em>Fig.1</em>, together with examples of how this meaning can be used in a sentence.</p>

<figure class="figure"><figcaption class="figure-caption text-center"><b>Fig.2</b> Possible Meaning for the Highlighted Word in <em>Fig.1</em></figcaption> <img class="figure-img img-fluid center-block" src="https://ancadumitrache.github.io/frames/meaning.png" width="80%" /></figure>

<p>3. Select <b>''None of the Above''</b>, if the meaning of the highlighted word is not in the list.</p>
</div>
</div>
<!-- End Instructions --><!-- Content Body -->

<section>
<div class="panel panel-default">
<div class="panel-heading">The sentence:</div>

<div class="panel-body"><span class="sentence" id="sentence">${sentence}</span></div>
</div>

<fieldset><label>What are the possible meaning(s) of <span id="phrase_question">${word_phrase}</span> in the context of the sentence above? Check ALL that apply.</label>

<div class="divider">&nbsp;</div>

<div class="checkbox" id="checkbox">&nbsp;</div>

<div class="collapse" id="demo">Explain the meaning of <span id="phrase_question">${word_phrase}</span> in your own words:<textarea cols="80" name="WhyNone" rows="3"></textarea></div>
<input id="phrase" name="phrase" type="hidden" value="${word_phrase}" /> <input id="b" name="b" type="hidden" value="${b}" /> <input id="e" name="e" type="hidden" value="${e}" /> <input id="framelist" name="framelist" type="hidden" value="${frames}" /> <input id="framedef" name="framedef" type="hidden" value="${frame_def}" /> <input id="frameex" name="frameex" type="hidden" value="${frame_ex}" /></fieldset>
</section>
<!-- End Content Body --></div>
</section>
<!-- close container -->
<style type="text/css">fieldset {
    padding: 10px;
    background:#fbfbfb;
    border-radius:5px;
    margin-bottom:5px;
    font-size: medium;
}

.figure-caption {
  font-size:small;
}

.checkbox label {
  padding: 10px;
}

.sentence {
  font-family: Garamond, Georgia, serif;
  color: #0000A0;
  font-size: large;
  text-align:center;
}

.sentfieldset {
  border: 1px solid gray; padding: 10px; margin: 0px; -webkit-border-radius: 5px; -moz-border-radius: 5px;
  border-radius: 5px;
  background:white;
}

.sentlegend {
  text-align: left;
  font-size: medium;
}

#phrase_question {
  font-weight: bold;
  color: darkred;
  font-family: Garamond, Georgia, serif;
  font-size: large;
}

#phrase_example {
  font-weight: bold;
  color: darkred;
  font-family: Garamond, Georgia, serif;
}

button.accordion {
    
    font-size: small;
    transition: 0.4s;
    margin-top:10px;
}

div.panel.panel-collapse {
    padding: 0 18px;
    background-color: white;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
}

div.panel.panel-default.list-group {
    font-size:small;
    font-family: Garamond, Georgia, serif;
    display: inline-block;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
    /*margin-bottom: 0;*/
    border: none;
    box-shadow: none;
}

.divider {
  height: 1px;
  width:100%;
  display:block; /* for use on default inline elements like span */
  margin: 9px 0;
  overflow: hidden;
  background-color: #e5e5e5;
}
</style>
<script type="text/javascript">

  (function($){function injector(t,splitter,klass,after){var a=t.text().split(splitter),inject='';if(a.length){$(a).each(function(i,item){inject+='<span class="'+klass+(i+1)+'">'+item+'</span>'+after});t.empty().append(inject)}}var methods={init:function(){return this.each(function(){injector($(this),'','char','')})},words:function(){return this.each(function(){injector($(this),' ','word',' ')})},lines:function(){return this.each(function(){var r="eefec303079ad17405c889e092e105b0";injector($(this).children("br").replaceWith(r).end(),r,'line','')})}};$.fn.lettering=function(method){if(method&&methods[method]){return methods[method].apply(this,[].slice.call(arguments,1))}else if(method==='letters'||!method){return methods.init.apply(this,[].slice.call(arguments,0))}$.error('Method '+method+' does not exist on jQuery.lettering');return this}})(jQuery);

  var sentence = document.getElementById("sentence");
  var b = parseInt(document.getElementById("b").getAttribute("value"));
  var e = parseInt(document.getElementById("e").getAttribute("value"));
  var framelist = document.getElementById("framelist");
  var framelist_array = framelist.getAttribute("value").split("f\:").join("").split(",");
  var framedef = document.getElementById("framedef");
  var framedef_array = framedef.getAttribute("value").split("','");
  framedef_array[0] = framedef_array[0].substring(1);
  framedef_array[framedef_array.length - 1] = framedef_array[framedef_array.length - 1].slice(0, -1);
  var frameex = document.getElementById("frameex");
  var frameex_array = frameex.getAttribute("value").split("','");
  frameex_array[0] = frameex_array[0].substring(1);
  frameex_array[frameex_array.length - 1] = frameex_array[frameex_array.length - 1].slice(0, -1);
  
  for (var idx = 0; idx < framelist_array.length; idx++) {
    framelist_array[idx] = framelist_array[idx].split("_").join(" ");
  
    var label = document.createElement("label");
    label.setAttribute("class", "form-check-label");
    
    var input = document.createElement("input");
    input.setAttribute("name", "FrameType");
    input.setAttribute("type", "checkbox");
    input.setAttribute("value", framelist_array[idx]);
    input.setAttribute("id", framelist_array[idx]);
    label.appendChild(input);
    
    var label_text = document.createElement("span");
    label_text.innerHTML = "<b>" + framelist_array[idx] + ":</b> " + framedef_array[idx] + "<br/>";
    label.appendChild(label_text);
    
    var button = document.createElement("button");
    button.setAttribute("type", "button");
    button.setAttribute("class", "accordion btn btn-default");
    button.innerHTML = "Click to see examples where the highlighted word expresses <b>" + framelist_array[idx] + "</b>";
    label.appendChild(button);
    
    var ex_div = document.createElement("div");
    ex_div.setAttribute("class", "panel panel-default list-group");
    ex_div.innerHTML = frameex_array[idx];
    //var ex_div_h = document.createElement("div");
    //ex_div_h.setAttribute("class", "panel-heading");
    //ex_div_h.innerHTML = "Other sentences where the highlighted word expresses <b>" + framelist_array[idx] + "</b>:";
    //var ex_div_b = document.createElement("div");
    //ex_div_b.setAttribute("class", "panel-body");
    //ex_div_b.innerHTML = frameex_array[idx];
    //ex_div.appendChild(ex_div_h);
    //ex_div.appendChild(ex_div_b);
    label.appendChild(document.createElement("BR"));
    label.appendChild(ex_div);
    
    document.getElementById("checkbox").appendChild(label);
//    document.getElementById("checkbox").appendChild(document.createElement("HR"));
//    document.getElementById("checkbox").appendChild(document.createElement("BR"));
    var divider = document.createElement("div");
    divider.setAttribute("class", "divider");
    document.getElementById("checkbox").appendChild(divider);
  }
  
  var input = document.createElement("input");
  input.setAttribute("name", "FrameType");
  input.setAttribute("type", "checkbox");
  input.setAttribute("value", "None of the above.");
  input.setAttribute("id", "none");
  
  var label = document.createElement("label");
  label.setAttribute("class", "form-check-label");
  label.setAttribute("data-toggle", "collapse");
  label.setAttribute("data-target", "#demo");
  label.innerHTML = "None of the above.";
  label.appendChild(input);
  document.getElementById("checkbox").appendChild(label);
  
  var acc = document.getElementsByClassName("accordion");
  for (var i = 0; i < acc.length; i++) {
    acc[i].onclick = function() {
      this.classList.toggle("active");
      var panel = this.nextElementSibling.nextElementSibling;
      if (panel.style.maxHeight){
        panel.style.maxHeight = null;
        $(this).html($(this).html().replace("hide", "see"));
      } else {
        panel.style.maxHeight = panel.scrollHeight + "px";
        $(this).html($(this).html().replace("see", "hide"));
      } 
    }
  }
   
   $(document).ready(function(){
    //$(".collapse").collapse();
		$("#sentence").lettering('words');
		// give ids for each word (position in sentence)
		var spans = $("#sentence").find("span").each(function() {
			var idNumber = $(this).attr("class").slice(4);
			$(this).attr("id", idNumber);
		});
		
		for (var idx = b + 1; idx <= e; idx++) {
		  //alert($(".word" + idx).text());
		  //$(".word" + idx).css("text-transform", "uppercase");
		  $(".word" + idx).css("font-weight", "bold");
		  $(".word" + idx).css("font-size", "large");
		  $(".word" + idx).css("color", "darkred");
		}
		
		$("#none").change(function() {
		  if($(this).prop("checked")) {
		    for (var idx = 0; idx < framelist_array.length; idx++) {
		      $("#" + framelist_array[idx]).prop("checked", false);
		    }
		  }
		});
		for (var idx = 0; idx < framelist_array.length; idx++) {
  		$("#" + framelist_array[idx]).change(function() {
  		  if($(this).prop("checked")) {
  		    $("#none").prop("checked", false);
  		    $(".collapse").collapse("hide");
  		  }
  		});
		}
	});
  

</script>
